(function(e){function t(t){for(var r,c,o=t[0],s=t[1],l=t[2],d=0,p=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&p.push(i[c][0]),i[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==i[s]&&(r=!1)}r&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},i={app:0},a=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/wrangle/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0045":function(e,t,n){},"2a35":function(e,t,n){"use strict";n("8608")},"3e13":function(e,t,n){"use strict";n("6819")},"45b4":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function i(e,t,n,i,a,c){var o=Object(r["w"])("router-view");return Object(r["r"])(),Object(r["d"])(o,{app:a.app},null,8,["app"])}var a=n("d4ec"),c=n("bee2"),o=n("b5c4"),s=n.n(o),l=s.a.generateUUID("xxxxyxxxxyxxxxyxxxxyxxxxyxxxxyxxxxyxxxxy",32),u=["red","blue","green","yellow","pink","purple","gray","cyan","green","teal","rebeccapurple","maroon"],d=function(e,t,n){return"undefined"===typeof e[t]?n:e[t]},p=Object(c["a"])((function e(t){Object(a["a"])(this,e),t=t||{},this.id=d(t,"id",l()),this.color=d(t,"color",u[Math.floor(Math.random()*u.length)]),this.positionX=d(t,"positionX",0),this.positionY=d(t,"positionY",0),this.reverse=d(t,"reverse",!1),this.speed=d(t,"speed",1),this.splat=!1})),f=p,h=function(){function e(t){for(var n in Object(a["a"])(this,e),t)this[n]=t[n]}return Object(c["a"])(e,[{key:"updateX",value:function(e,t){var n=this;return function(r){e.updateX(t,r),n.wire.emit("move",t)}}},{key:"updateY",value:function(e,t){var n=this;return function(r){e.updateY(t,r),n.wire.emit("move",t)}}},{key:"actionA",value:function(e,t){var n=this;return function(){e.actionA(t,(function(){n.wire.emit("move",t)}))}}},{key:"buildCharacter",value:function(e){return new f(e)}},{key:"addCharacter",value:function(e){return this.state.add("characters",[this.buildCharacter(e)])[0]}},{key:"listen",value:function(e){var t=this;this.wire.socket.on("move",(function(n){var r=t.queries.findCharacter(n.id);if(r)return e.updateFromRemote(r,n);t.addCharacter(n)})),this.wire.socket.on("remove",(function(e){var n=t.queries.findCharacter(e.id);t.state.removeAll("characters",[n])}))}},{key:"buildCPU",value:function(e){return new f({color:"#0d003d",positionX:e,speed:.2})}},{key:"buildCPUs",value:function(){this.state.add("cpus",[this.buildCPU(30)]),this.state.add("cpus",[this.buildCPU(80)]),this.state.add("cpus",[this.buildCPU(150)]),this.state.add("cpus",[this.buildCPU(245)]),this.state.add("cpus",[this.buildCPU(305)]),this.state.add("cpus",[this.buildCPU(-30)]),this.state.add("cpus",[this.buildCPU(-100)]),this.state.add("cpus",[this.buildCPU(-160)]),this.state.add("cpus",[this.buildCPU(-225)])}},{key:"paceCPU",value:function(e,t,n,r){var i=this;n+=1*r,e.updateX(t,1*r,!0),(n>40||n<-40)&&(r*=-1),setTimeout((function(){i.paceCPU(e,t,n,r)}),30)}}]),e}(),v=h,x=(n("4de4"),n("d3b7"),n("d81d"),n("159b"),n("a434"),s.a.generateUUID("xxxxyxxxxyxxxxyxxxxyxxxxyxxxxyxxxxyxxxxy",32)),y=function(){function e(t){Object(a["a"])(this,e),this.data=t}return Object(c["a"])(e,[{key:"findAll",value:function(e,t){var n=this.data[e];return t&&(n=n.filter(t)),n}},{key:"findById",value:function(e,t){return this.findAll(e,(function(e){return e.id==="".concat(t)}))[0]}},{key:"findOrCreateById",value:function(e,t,n){var r=this.findById(e,t);if(r)for(var i in n)r[i]=n[i];else r=this.add(e,[n])[0];return r}},{key:"find",value:function(e,t){return this.findAll(e,t)[0]}},{key:"add",value:function(e,t,n){var r=t.map((function(e){var t=Object.assign({},e);return t.id=t.id||x(),"function"===typeof n&&n(t),t}));return this.data[e].push.apply(this.data[e],r),r}},{key:"removeAll",value:function(e,t){var n=this;t.forEach((function(t){var r=n.data[e].indexOf(t);-1!==r&&n.data[e].splice(r,1)}))}}]),e}(),b=y,m=function(){function e(t){for(var n in Object(a["a"])(this,e),t)this[n]=t[n]}return Object(c["a"])(e,[{key:"findCharacter",value:function(e){return this.state.findById("characters",e)}},{key:"findAllCharacters",value:function(){return this.state.findAll("characters")}},{key:"findAllCPUs",value:function(){return this.state.findAll("cpus")}},{key:"characterPosition",value:function(e,t,n){var r="";return n||(r+="left: calc(50% + ".concat(t.positionX+e.offsetX-3.5,"rem);")),r+="top: calc(50% + ".concat(4.5-t.positionY,"rem);"),t.splat?r+="transform: scale(".concat(t.reverse?"-":"","1.33, 0.5); margin-top: 1rem;"):t.reverse&&(r+="transform: scaleX(-1);"),r}},{key:"levelPosition",value:function(e){var t="";return t+="left: -".concat(e.offsetX-2.5,"rem;"),t}}]),e}(),O=m,j=n("daa8"),w=function(){function e(){Object(a["a"])(this,e),this.socket=Object(j["a"])("https://wrangle-server.herokuapp.com"),this.listen()}return Object(c["a"])(e,[{key:"emit",value:function(e,t){this.socket.emit(e,t)}},{key:"listen",value:function(){}}]),e}(),g=w,k=s.a.generateUUID("xxxxyxxxxyxxxxyxxxxyxxxxyxxxxyxxxxyxxxxy",32),C={props:{state:{type:Object,default:function(){return new b({characters:[],cpus:[]})}},wire:{type:Object,default:function(){return new g({id:k()})}}},data:function(){window.wrangle=this;var e=new O({state:this.state}),t=new v({state:this.state,queries:e,wire:this.wire});return{app:this,queries:e,commands:t}}},P=(n("2a35"),n("6b0d")),X=n.n(P);const A=X()(C,[["render",i]]);var U=A,Y=n("9483");Object(Y["a"])("".concat("/wrangle/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var M=n("6c02");function I(e,t,n,i,a,c){var o=Object(r["w"])("Camera"),s=Object(r["w"])("Controller");return Object(r["r"])(),Object(r["f"])("div",null,[Object(r["h"])(o,{app:n.app,level:a.level,characters:a.characters,character:a.character},null,8,["app","level","characters","character"]),Object(r["h"])(s,{"update-x":n.app.commands.updateX(a.level,a.character),"update-y":n.app.commands.updateY(a.level,a.character),"action-a":n.app.commands.actionA(a.level,a.character),initialized:function(){}},null,8,["update-x","update-y","action-a","initialized"])])}var L={class:"camera"};function E(e,t,n,i,a,c){var o=Object(r["w"])("Character"),s=Object(r["w"])("Level");return Object(r["r"])(),Object(r["f"])("div",L,[Object(r["h"])(o,{app:n.app,level:n.level,character:n.character,"is-static":!0},null,8,["app","level","character"]),Object(r["g"])("div",null,[(Object(r["r"])(!0),Object(r["f"])(r["a"],null,Object(r["v"])(n.characters,(function(e){return Object(r["r"])(),Object(r["d"])(o,{key:"character-".concat(e.id),app:n.app,level:n.level,character:e},null,8,["app","level","character"])})),128))]),Object(r["g"])("div",null,[(Object(r["r"])(!0),Object(r["f"])(r["a"],null,Object(r["v"])(c.cpus,(function(e){return Object(r["r"])(),Object(r["d"])(o,{key:"cpu-".concat(e.id),app:n.app,level:n.level,character:e},null,8,["app","level","character"])})),128))]),Object(r["g"])("div",null,[Object(r["h"])(s,{app:n.app,level:n.level},null,8,["app","level"])])])}var S=["innerHTML"];function q(e,t,n,i,a,c){return Object(r["r"])(),Object(r["f"])("div",null,[Object(r["g"])("div",{style:Object(r["n"])(n.app.queries.characterPosition(n.level,n.character,n.isStatic)),class:"character",innerHTML:c.img},null,12,S)])}n("ac1f"),n("5319");var T='<svg width="100%" height="100%" viewBox="0 0 525 484" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><rect id="Artboard2" x="0" y="3.985" width="524.939" height="479.211" style="fill:none;"/><clipPath id="_clip1"><rect x="0" y="3.985" width="524.939" height="479.211"/></clipPath><g clip-path="url(#_clip1)"><g><path d="M437.272,420.992l-131.585,-0l23.198,62.204l90.815,-0l17.572,-62.204Z" style="fill:#90653d;"/><path d="M200.323,420.992l-131.585,-0l23.199,62.204l90.814,-0l17.572,-62.204Z" style="fill:#90653d;"/><path d="M195.548,4.487c87.16,-15.762 330.736,344.491 309.349,419.164c-14.356,50.127 -434.618,25.053 -464.629,19.651c-132.695,-23.889 113.799,-185.292 144.317,-333.146c18.981,-91.954 -85.16,-11.581 -85.16,-11.581c0,-0 8.963,-78.327 96.123,-94.088Z" style="fill:$COLOR;"/><path d="M499.378,379.167c-0.457,13.121 -4.155,22.435 -10.922,24.672c-13.083,4.323 -32.713,-19.431 -43.81,-53.011c-11.097,-33.581 -9.485,-64.354 3.597,-68.677c2.495,-0.825 5.228,-0.628 8.092,0.463c16.674,27.348 31.284,58.987 43.043,96.553Z" style="fill:#ad6c2f;"/><path d="M453.236,371.688c-0,-0 39.046,-11.723 43.845,-23.759c4.798,-12.036 35.837,-7.933 22.718,5.917c-13.118,13.851 -56.537,34.426 -56.537,34.426c-3.678,-5.048 -7.419,-10.665 -10.026,-16.584Z" style="fill:#ad1000;"/><path d="M342.093,74.093c36.973,-12.422 77.075,7.511 89.496,44.484c12.422,36.973 -7.51,77.075 -44.483,89.496c-36.973,12.422 -77.075,-7.511 -89.497,-44.484c-12.422,-36.972 7.511,-77.075 44.484,-89.496Z" style="fill:#fefefe;"/><path d="M408.303,126.4c13.928,-4.679 29.035,2.829 33.714,16.757c4.679,13.928 -2.829,29.034 -16.757,33.714c-13.928,4.679 -29.034,-2.83 -33.714,-16.757c-4.679,-13.928 2.83,-29.035 16.757,-33.714Z"/><ellipse cx="227.401" cy="302.309" rx="53.878" ry="83.902" style="fill:#845122;"/><path d="M227.401,218.407c29.736,0 53.878,37.595 53.878,83.902c0,46.308 -24.142,83.903 -53.878,83.903l0,-167.805Z" style="fill:#67411f;"/></g></g></svg>',z={props:["app","level","character","isStatic"],computed:{img:function(){return T.replace(/\$COLOR/,this.character.color)}}};n("888e");const Z=X()(z,[["render",q]]);var _=Z,K=Object(r["g"])("div",{class:"level-ground"},null,-1);function B(e,t,n,i,a,c){return Object(r["r"])(),Object(r["f"])("div",null,[Object(r["g"])("div",{class:"level",style:Object(r["n"])(n.app.queries.levelPosition(n.level))},null,4),K])}var $={props:["app","level"]};n("9241");const D=X()($,[["render",B]]);var F=D,H={components:{Character:_,Level:F},props:["app","level","characters","character"],computed:{cpus:function(){return this.app.queries.findAllCPUs()}},mounted:function(){var e=this;this.app.commands.buildCPUs(),this.cpus.forEach((function(t,n){e.app.commands.paceCPU(e.level,t,1,n%2===0?-1:1)}))}};const R=X()(H,[["render",E]]);var N=R,J={class:"controller"},G={ref:"dpad",class:"d-pad"},Q={ref:"buttonA",class:"button-a"};function V(e,t,n,i,a,c){return Object(r["r"])(),Object(r["f"])("div",J,[Object(r["g"])("div",G,[a.dPadCenter?(Object(r["r"])(),Object(r["f"])("div",{key:0,class:"circle",style:Object(r["n"])(c.dPadCircleStyle)},null,4)):Object(r["e"])("",!0)],512),Object(r["g"])("a",Q,null,512)])}n("99af");var W=function(e,t){return-1!==e.indexOf(t)},ee=10,te=38,ne=40,re=37,ie=39,ae=32,ce=30,oe={props:["updateX","updateY","actionA","initialized"],data:function(){return{isInitialized:!1,keydownInterval:void 0,dPadCenter:null}},computed:{dPadCircleStyle:function(){var e=Math.max(this.dPadCenter.x-5*ee,5),t=Math.max(window.outerHeight-this.dPadCenter.y-5*ee,5);return"left: ".concat(e,"px; bottom: ").concat(t,"px;")}},mounted:function(){var e=this,t=[],n={};this.run(t),document.addEventListener("keydown",(function(r){e.isInitialized=e.isInitialized?e.isInitialized:e.initialized()||!0;var i=r.which||r.keyCode||0;n[i]=n[i]?n[i]:e.addKey(t,i)||1})),document.addEventListener("keyup",(function(r){var i=r.which||r.keyCode||0;e.removeKey(t,i),delete n[i]})),this.$refs.dpad.addEventListener("touchstart",(function(t){t.touches&&(e.dPadCenter={x:t.touches[0].clientX,y:t.touches[0].clientY})})),this.$refs.dpad.addEventListener("touchend",(function(){e.dPadCenter=null,t.splice(0,t.length)})),this.$refs.dpad.addEventListener("touchmove",(function(n){n.preventDefault(),n.touches&&(t.splice(0,t.length),n.touches[0].clientX<e.dPadCenter.x?e.addKey(t,re):n.touches[0].clientX>e.dPadCenter.x&&e.addKey(t,ie))})),this.$refs.buttonA.addEventListener("touchstart",(function(){e.actionA()}))},methods:{addKey:function(e,t){-1===e.indexOf(t)&&e.push(t)},removeKey:function(e,t){-1!==e.indexOf(t)&&e.splice(e.indexOf(t),1)},run:function(e){var t=this;this.keydownInterval=setInterval((function(){W(e,te)?t.updateY(1):W(e,ne)&&t.updateY(-1),W(e,re)?t.updateX(-1):W(e,ie)&&t.updateX(1),W(e,ae)&&(t.removeKey(e,ae),t.actionA())}),ce)},stop:function(){clearInterval(this.keydownInterval)}}};n("3e13");const se=X()(oe,[["render",V]]);var le=se,ue=20,de=9,pe=3,fe=[],he=function(){function e(){Object(a["a"])(this,e),this.offsetX=0,this.bgItems=[]}return Object(c["a"])(e,[{key:"updateX",value:function(e,t,n){t<0&&!e.reverse?e.reverse=!0:t>0&&e.reverse?e.reverse=!1:e.positionX+=e.speed*t,n||(this.offsetX-=t)}},{key:"splat",value:function(e,t){e.splat=!0,setTimeout((function(){e.splat=!1}),ue*t)}},{key:"updateY",value:function(e,t){t>0?(this.splat(e,2),e.positionY+=t):e.positionY+t<=0?(e.positionY=0,this.splat(e,4)):e.positionY+=t}},{key:"updateFromRemote",value:function(e,t){e.positionY!==t.positionY&&this.updateY(e,t.positionY-e.positionY),e.positionX!==t.positionX&&(e.positionX=t.positionX),e.reverse!==t.reverse&&(e.reverse=t.reverse),e.color||(e.color=t.color)}},{key:"actionA",value:function(e,t){var n=this,r=e.positionY+1;fe.forEach((function(e){return clearTimeout(e)}));for(var i=0;i<=de;i++)fe.push(setTimeout((function(){return t(n.updateY(e,1))}),ue*i));for(var a=0;a<r+de;a++)fe.push(setTimeout((function(){return t(n.updateY(e,-1))}),ue*(de+pe+a)))}}]),e}(),ve=he,xe={components:{Camera:N,Controller:le},props:["app"],data:function(){return{characters:this.app.queries.findAllCharacters(),character:this.app.commands.buildCharacter(),level:new ve}},mounted:function(){this.app.commands.listen(this.level)}};const ye=X()(xe,[["render",I]]);var be=ye,me=[{path:"/",name:"Home",component:be}],Oe=Object(M["a"])({history:Object(M["b"])("/wrangle/"),routes:me}),je=Oe;Object(r["c"])(U).use(je).mount("#app")},6819:function(e,t,n){},8608:function(e,t,n){},"888e":function(e,t,n){"use strict";n("45b4")},9241:function(e,t,n){"use strict";n("0045")}});
//# sourceMappingURL=app.d745d6fb.js.map